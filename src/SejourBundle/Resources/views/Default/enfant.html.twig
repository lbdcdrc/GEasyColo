{% extends "::base.html.twig" %}


{% block body %}


 <div class="row">
  <div class="col-sm-4"></div>
  <div class="col-sm-4">
	  <center>
	  <h1> Gestion des Enfants <a href="{{ path('enfant_creer') }}" class="btn btn-info" role="button"><span class="glyphicon glyphicon-plus"></span></a></h1>
		{% for flashMessage in app.session.flashbag.get('notice') %}
			<div class="alert alert-info">
				{{ flashMessage }}
			</div>
		{% endfor %}
	  </center>
  </div>
  <div class="col-sm-4"></div>
</div> 

<h2> Séjours en cours </h2>
{% for Sejour in listeEnfantSejour %}

{% if "now"|date('Ymd')  <= Sejour.DateFin|date('Ymd') %}

<div class="container">
  <div class="panel-group">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#{{Sejour.id}}">Séjour {{ Sejour.sejour }} ({{ Sejour.listEnfants|length }})</a>
        </h4>
      </div>
      <div id="{{Sejour.id}}" class="panel-collapse collapse">
        <div class="panel-body">	
			<table class="table table-striped">
			<thead>
			  <tr>
				<th>IdEnfant</th>
				<th>Nom</th>
				<th>Prénom</th>
				<th>Age</th>
				<th>Séjour</th>
				<th>Info</th>
				<th>Chambre</th>
				<th>Action</th>
			  </tr>
			</thead>
			<tbody>
			{% for enfant in Sejour.listEnfants %}
				<tr>
				<td>{{ enfant.id }}</td>
				<td>{{ enfant.Nom }}</td>
				<td>{{ enfant.Prenom }}</td>
				<td>{{ enfant.Age }}</td>
				<td>{{ enfant.Sejour.nomThema }}</td>
				<td>{{ enfant.Infos }} </td>
				<td>{{ enfant.chambre }}</td>
				<td><a href="{{ path('enfant_edit', { 'id': enfant.id }) }}" class="btn btn-warning" role="button"><span class="glyphicon glyphicon-edit"></span></a>
				<a href="{{ path('enfant_probleme_list', { 'id': enfant.id }) }}" 
				{% if enfant.problemeencours > 0 %} 
				class="btn btn-warning" role="button">{{enfant.problemeencours }} problèmes
				{% else %}
				class="btn btn-info" role="button">Voir le suivi
				{% endif %}
				</a>
				<a href="{{ path('enfant_supprimer', { 'id': enfant.id }) }}" class="btn btn-danger" role="button"><span class="glyphicon glyphicon-trash"></span></a>
				</td>
				</tr>
			{% endfor %}
			</tbody>
		  </table>      
        </div>
        <div class="panel-footer">{{ Sejour.listEnfants|length }} enfants inscrits sur le séjour</div>
      </div>
    </div>
  </div>
</div>

{% endif %}



{% endfor %}


<h2> Séjours passés </h2>
{% for Sejour in listeEnfantSejour %}

{% if "now"|date('Ymd')  > Sejour.DateFin|date('Ymd') %}

<div class="container">
  <div class="panel-group">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#{{Sejour.id}}">Séjour {{ Sejour.sejour }} ({{ Sejour.listEnfants|length }})</a>
        </h4>
      </div>
      <div id="{{Sejour.id}}" class="panel-collapse collapse">
        <div class="panel-body">	
			<table class="table table-striped">
			<thead>
			  <tr>
				<th>IdEnfant</th>
				<th>Nom</th>
				<th>Prénom</th>
				<th>Age</th>
				<th>Séjour</th>
				<th>Info</th>
				<th>Chambre</th>
				<th>Action</th>
			  </tr>
			</thead>
			<tbody>
			{% for enfant in Sejour.listEnfants %}
				<tr>
				<td>{{ enfant.id }}</td>
				<td>{{ enfant.Nom }}</td>
				<td>{{ enfant.Prenom }}</td>
				<td>{{ enfant.Age }}</td>
				<td>{{ enfant.Sejour.nomThema }}</td>
				<td>{{ enfant.Infos }} </td>
				<td>{{ enfant.chambre }}</td>
				<td><a href="{{ path('enfant_edit', { 'id': enfant.id }) }}" class="btn btn-warning" role="button"><span class="glyphicon glyphicon-edit"></span></a>
				<a href="{{ path('enfant_probleme_list', { 'id': enfant.id }) }}" 
				{% if enfant.problemeencours > 0 %} 
				class="btn btn-warning" role="button">{{enfant.problemeencours }} problèmes
				{% else %}
				class="btn btn-info" role="button">Voir le suivi
				{% endif %}
				</a>
				<a href="{{ path('enfant_supprimer', { 'id': enfant.id }) }}" class="btn btn-danger" role="button"><span class="glyphicon glyphicon-trash"></span></a>
				</td>
				</tr>
			{% endfor %}
			</tbody>
		  </table>      
        </div>
        <div class="panel-footer">{{ Sejour.listEnfants|length }} enfants inscrits sur le séjour</div>
      </div>
    </div>
  </div>
</div>

{% endif %}



{% endfor %}



{% endblock %}



